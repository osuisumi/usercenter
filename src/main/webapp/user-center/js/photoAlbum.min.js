//相片预览
var photoPreview=$(window).photoPreview||{},photoPreview={p_index:0,f_index:0,element:{p_wrap:"#photoPreviewBd",layer:".g-photoPreview-layer",big_list:".m-preview-bList",small_list:".m-preview-sList"},photo_area_height:null,total:0,page:1,limit:9,totalPage:0,nowPhotoId:"",init:function(a,b,c,d){""!==a&&void 0!==a&&"undefined"!==a&&null!==a&&(this.p_index=a);this.total=b||0;this.page=c||1;this.limit=d||9;this.totalPage=Math.ceil(this.total/this.limit);this.show();this.close()},show:function(){var a=$(this.element.p_wrap);a.show();this.photo_area_height=parseInt($(this.element.layer).height()-140);a.find(this.element.big_list).css("height",this.photo_area_height+"px");this.bigPhoto(a);this.smallPhoto(a)},close:function(){$(this.element.p_wrap).on("click",".close",function(){$(photoPreview.element.p_wrap).hide()})},bigPhoto:function(a){var b=a.find(this.element.big_list).children().length;photoPreview.photoChange(a);photoPreview.hidePrevNextBtn();$("#photoPreiewPrev").off().on("click",function(){$("#photoPreiewNext").show();0===photoPreview.p_index&&prev();photoPreview.p_index--;photoPreview.hidePrevNextBtn();photoPreview.photoChange(a)});$("#photoPreiewNext").off().on("click",function(){$("#photoPreiewPrev").show();photoPreview.p_index===b-1&&next();photoPreview.p_index++;photoPreview.hidePrevNextBtn();photoPreview.photoChange(a)})},smallPhoto:function(a){var b=$(photoPreview.element.layer).find(photoPreview.element.small_list),c=b.children(),d=$("#photoPreiewFocusPrev"),e=$("#photoPreiewFocusNext");c.innerWidth();parseInt(c.css("marginRight"));b.parent().width();photoPreview.f_index=parseInt(photoPreview.p_index/photoPreview.limit);photoPreview.totalPage>photoPreview.page?e.show():e.hide();1<photoPreview.page?d.show():d.hide();c.on("click",function(){photoPreview.p_index=a.find(photoPreview.element.small_list).children().index(this);photoPreview.photoChange(a);photoPreview.hidePrevNextBtn()})},photoChange:function(a){var b=a.find(photoPreview.element.big_list).children(),c=b.eq(photoPreview.p_index).children("img").attr("photoId");photoPreview.nowPhotoId=c;loadPhotoDetail(c);c=b.eq(photoPreview.p_index).children("img").height();b.removeClass("z-crt").eq(photoPreview.p_index).addClass("z-crt");b.eq(photoPreview.p_index).children("img").css("top",(photoPreview.photo_area_height-c)/2+"px");a.find(photoPreview.element.small_list).children().removeClass("z-crt").eq(photoPreview.p_index).addClass("z-crt")},hidePrevNextBtn:function(){1==photoPreview.page&&0>=photoPreview.p_index?$("#photoPreiewPrev").hide():$("#photoPreiewPrev").show();photoPreview.page==photoPreview.totalPage&&photoPreview.p_index+1>=photoPreview.total%photoPreview.limit?$("#photoPreiewNext").hide():$("#photoPreiewNext").show()}};